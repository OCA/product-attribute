<?xml version="1.0" encoding="UTF-8"?>
<openerp>
    <data>

<record id="product_pricelist_view" model="ir.ui.view">
    <field name="model">product.pricelist</field>
    <field name="inherit_id" ref="product.product_pricelist_view"/>
    <field name="arch" type="xml">
        <field name="type" position="after">
            <field name="price_grid"/>
        </field>
    </field>
</record>

<record id="product_pricelist_view_tree" model="ir.ui.view">
    <field name="model">product.pricelist</field>
    <field name="inherit_id" ref="product.product_pricelist_view_tree"/>
    <field name="arch" type="xml">
        <field name="type" position="after">
            <field name="price_grid"/>
        </field>
    </field>
</record>


<record id="product_pricelist_version_form_view" model="ir.ui.view">
    <field name="model">product.pricelist.version</field>
    <field name="inherit_id" ref="product.product_pricelist_version_form_view"/>
    <field name="arch" type="xml">
        <field name="pricelist_id" position="after">
            <field name="price_grid"/>
        </field>
        <xpath expr="//group[1]" position="after">
            <group attrs="{'invisible': [('price_grid', '=', False)]}" col="4">
                <button name="button_template_in_version"
                        string="Product templates in this version"
                        class="oe_link" type="object"
                        help="Click to mass edit prices below"/>
                <field name="product_in_version_count" nolabel="1"
                       attrs="{'invisible': [('price_grid', '=', False)]}"/>
                <button name="button_template_out_version"
                        string="Product templates outside of this version"
                        class="oe_link" type="object"
                        help="Click to add a version on them"/>
                <field name="product_out_version_count" nolabel="1"/>
                <button name="button_product_in_version"
                        string="Product in this version"
                        class="oe_link" type="object"
                        help="Click to mass edit prices below"/>
                <span/>
                <button name="button_product_out_version"
                        string="Products outside of this version"
                        class="oe_link" type="object"
                        help="Click to mass edit prices below"/>
            </group>
        </xpath>
        <xpath expr="//notebook/page[@string='Item List']"
               position="attributes">
            <attribute name="attrs">{'invisible': [('price_grid', '=', True)]}</attribute>
        </xpath>
        <xpath expr="//notebook[last()]" position="inside">
            <page name="grid" string="Grid" attrs="{'invisible': [('price_grid', '=', False)]}">
                <group col="4">
                    <field name="item_grid_ids" nolabel="1">
                        <tree string="Price Grid" editable="1">
                            <field name="sequence" widget="handle"/>
                            <field name="id"/>
                            <button name="button_product_template"
                                    icon="terp-stock_symbol-selection"
                                    class="oe_link" type="object"
                                    attrs="{'invisible': [('product_tmpl_id', '=', False)]}"
                                    help="Click to see this product template"/>
                            <field name="product_tmpl_id"/>
                            <button name="button_product_product"
                                    icon="terp-stock_symbol-selection"
                                    class="oe_link" type="object"
                                    attrs="{'invisible': [('product_id', '=', False)]}"
                                    help="Click to see this product"/>
                            <field name="product_id"/>
                            <field name="price_surcharge" string="Price"/>
                            <field name="related_sequence"/>
                        </tree>
                    </field>
                </group>
            </page>
        </xpath>
    </field>
</record>


    </data>
</openerp>
